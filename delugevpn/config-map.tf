resource "kubernetes_config_map" "delugevpn_env_config_map" {
  metadata {
    name      = "delugevpn-env-config-map"
    namespace = var.namespace
  }

  data = {
    "VPN_ENABLED"                  = "yes"
    "VPN_PROV"                     = "pia"
    "VPN_CLIENT"                   = "openvpn"
    "VPN_USER"                     = var.delugevpn_vpn_user
    "VPN_PASS"                     = var.delugevpn_vpn_password
    "ENABLE_PRIVOXY"               = "no"
    "STRICT_PORT_FORWARD"          = "yes"
    "LAN_NETWORK"                  = "192.168.0.0/24"
    "NAME_SERVERS"                 = "84.200.69.80,37.235.1.174,1.1.1.1,37.235.1.177,84.200.70.40,1.0.0.1"
    "DEBUG"                        = "false"
    "DELUGE_DAEMON_LOG_LEVEL"      = "info"
    "DELUGE_WEB_LOG_LEVEL"         = "info"
    "DELUGE_ENABLE_WEBUI_PASSWORD" = "yes"
    "UMASK"                        = "000"
    "PUID"                         = var.local_uid
    "PGID"                         = var.local_gid
    "TZ"                           = var.timezone
  }
}

#####################################################################################################################

resource "kubernetes_config_map" "delugevpn_openvpn_volume" {
  metadata {
    name      = "delugevpn-openvpn-volume"
    namespace = var.namespace
  }

  data = {
    "ca.rsa.2048.crt"  = base64decode("LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUZxekNDQkpPZ0F3SUJBZ0lKQUtaN0Q1WXY4N3FETUEwR0NTcUdTSWIzRFFFQkRRVUFNSUhvTVFzd0NRWUQKVlFRR0V3SlZVekVMTUFrR0ExVUVDQk1DUTBFeEV6QVJCZ05WQkFjVENreHZjMEZ1WjJWc1pYTXhJREFlQmdOVgpCQW9URjFCeWFYWmhkR1VnU1c1MFpYSnVaWFFnUVdOalpYTnpNU0F3SGdZRFZRUUxFeGRRY21sMllYUmxJRWx1CmRHVnlibVYwSUVGalkyVnpjekVnTUI0R0ExVUVBeE1YVUhKcGRtRjBaU0JKYm5SbGNtNWxkQ0JCWTJObGMzTXgKSURBZUJnTlZCQ2tURjFCeWFYWmhkR1VnU1c1MFpYSnVaWFFnUVdOalpYTnpNUzh3TFFZSktvWklodmNOQVFrQgpGaUJ6WldOMWNtVkFjSEpwZG1GMFpXbHVkR1Z5Ym1WMFlXTmpaWE56TG1OdmJUQWVGdzB4TkRBME1UY3hOek0xCk1UaGFGdzB6TkRBME1USXhOek0xTVRoYU1JSG9NUXN3Q1FZRFZRUUdFd0pWVXpFTE1Ba0dBMVVFQ0JNQ1EwRXgKRXpBUkJnTlZCQWNUQ2t4dmMwRnVaMlZzWlhNeElEQWVCZ05WQkFvVEYxQnlhWFpoZEdVZ1NXNTBaWEp1WlhRZwpRV05qWlhOek1TQXdIZ1lEVlFRTEV4ZFFjbWwyWVhSbElFbHVkR1Z5Ym1WMElFRmpZMlZ6Y3pFZ01CNEdBMVVFCkF4TVhVSEpwZG1GMFpTQkpiblJsY201bGRDQkJZMk5sYzNNeElEQWVCZ05WQkNrVEYxQnlhWFpoZEdVZ1NXNTAKWlhKdVpYUWdRV05qWlhOek1TOHdMUVlKS29aSWh2Y05BUWtCRmlCelpXTjFjbVZBY0hKcGRtRjBaV2x1ZEdWeQpibVYwWVdOalpYTnpMbU52YlRDQ0FTSXdEUVlKS29aSWh2Y05BUUVCQlFBRGdnRVBBRENDQVFvQ2dnRUJBUFhECkwxTDl0WDZER2YzNmxpQTdVQlR5NUk4Njl6MFVWbzNsSW1mT3MvR1NpRktQdElubGVzUDY1NTc3bmQ3VU56elgKbEgvUC9DbkZQZEJXbExwNXplM0hSQkNjL0F2Z3I1Q2RNUmtFc3lTTDVHSEJac3g2dzJjYXlRMkVjUmhWVHdXcApjZGxkZU5PK3BQcjlySWdQcnRYcVQ0U1dWaVRRUkJlR004Q0R4QXlUb3BUc29ialNpWVpDRjlUYTFndW5sMEcvCjhWZnArU1hmWUNDK1p6V3ZQK0wxcEZoUFJxelFROGsrd01aSW92T2JLMXMrbmx3UGFMeWF5enc5YThzVW52V0IKLzVyR1BkSVluUVdQZ29ObExOOUhwU21zQWN3Mno4RFhJOXBJeGJyNzRjYjMvSFNmdVlHT0xrUnFyT2s2aDRSQwpPZnVXb1RyWnVwMXVFT24rZnc4Q0F3RUFBYU9DQVZRd2dnRlFNQjBHQTFVZERnUVdCQlF2NjNuUS9wSkF0NXRMCnk4VkpjYkhlMjJaT3NqQ0NBUjhHQTFVZEl3U0NBUll3Z2dFU2dCUXY2M25RL3BKQXQ1dEx5OFZKY2JIZTIyWk8Kc3FHQjdxU0I2ekNCNkRFTE1Ba0dBMVVFQmhNQ1ZWTXhDekFKQmdOVkJBZ1RBa05CTVJNd0VRWURWUVFIRXdwTQpiM05CYm1kbGJHVnpNU0F3SGdZRFZRUUtFeGRRY21sMllYUmxJRWx1ZEdWeWJtVjBJRUZqWTJWemN6RWdNQjRHCkExVUVDeE1YVUhKcGRtRjBaU0JKYm5SbGNtNWxkQ0JCWTJObGMzTXhJREFlQmdOVkJBTVRGMUJ5YVhaaGRHVWcKU1c1MFpYSnVaWFFnUVdOalpYTnpNU0F3SGdZRFZRUXBFeGRRY21sMllYUmxJRWx1ZEdWeWJtVjBJRUZqWTJWegpjekV2TUMwR0NTcUdTSWIzRFFFSkFSWWdjMlZqZFhKbFFIQnlhWFpoZEdWcGJuUmxjbTVsZEdGalkyVnpjeTVqCmIyMkNDUUNtZXcrV0wvTzZnekFNQmdOVkhSTUVCVEFEQVFIL01BMEdDU3FHU0liM0RRRUJEUVVBQTRJQkFRQW4KYTVQZ3J0eGZ3VHVtRDQrMy9TWXZ3b0Q2NmNCOEljSy8vaDFtQ3pBZHVVOEtnVVhvY0x4N1FnSldvOWxuWjh4VQpyeVh2V2FiMnVzZzRmcWs3RlBpMDBiRUQ0ZjRxVlFGVmZHZlBaSUg5UVE3LzQ4YlBNOVJ5ZnpJbVpXVUNlbkszCjdwZHc0QnZnb3lzMnJITEhiR2VuN2YyOGtuVDJqL2NiTXhkNzh0UWMyMFRJT2JHam84K0lTVFJjbFNUUkJ0eUMKR29oc2VLWXBUUzloaW1GRVJwVWdOdGVmdllIYm43MG1JT3pmT0pGVFZxZnJwdGY5alhhOU44TXB5M2F5Zm9kegoxd2lxZHRlcUZYa1RZb1NEY3RnS01pWjZHZG9jSzluTXJvUWlwSVF0cG53ZDR5QkRXSXlDNkJ2bGtycTVUUVV0CllEUTh6OXYrRE1PNml3eUlEUmlVCi0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K")
    "crl.rsa.2048.pem" = base64decode("LS0tLS1CRUdJTiBYNTA5IENSTC0tLS0tCk1JSUNXRENDQVVBd0RRWUpLb1pJaHZjTkFRRU5CUUF3Z2VneEN6QUpCZ05WQkFZVEFsVlRNUXN3Q1FZRFZRUUkKRXdKRFFURVRNQkVHQTFVRUJ4TUtURzl6UVc1blpXeGxjekVnTUI0R0ExVUVDaE1YVUhKcGRtRjBaU0JKYm5SbApjbTVsZENCQlkyTmxjM014SURBZUJnTlZCQXNURjFCeWFYWmhkR1VnU1c1MFpYSnVaWFFnUVdOalpYTnpNU0F3CkhnWURWUVFERXhkUWNtbDJZWFJsSUVsdWRHVnlibVYwSUVGalkyVnpjekVnTUI0R0ExVUVLUk1YVUhKcGRtRjAKWlNCSmJuUmxjbTVsZENCQlkyTmxjM014THpBdEJna3Foa2lHOXcwQkNRRVdJSE5sWTNWeVpVQndjbWwyWVhSbAphVzUwWlhKdVpYUmhZMk5sYzNNdVkyOXRGdzB4TmpBM01EZ3hPVEF3TkRaYUZ3MHpOakEzTURNeE9UQXdORFphCk1DWXdFUUlCQVJjTU1UWXdOekE0TVRrd01EUTJNQkVDQVFZWERERTJNRGN3T0RFNU1EQTBOakFOQmdrcWhraUcKOXcwQkFRMEZBQU9DQVFFQVFabzlYOTdjaThFY1BZdS91SzJIQjE1Mk9aYmVaQ0lObVl5bHVMRE9kY1N2ZzZCNQpqSStmZktOM2xhRHZjenNHNkN4bVkzak55Yzc5WFZwRVlVbnE0clQzRmZ2ZVcxK1JhbGYrVmYzOEhkcHdCOEVXCkI0aFpsUTIwNSsyMUNBTEx2WnZSOEhjUHhDOUtFbmV2MW1VNDZ3a1Rpb3YwRUtjK0VkUnhrajV5TWd2MFYyUmUKemU3QVArTlE5eWt2RFNjSDRlWUNzbXVmTnBJakJMaHBMRTJjdVpaWEJMY1BodVJ6Vm9VM2w3QTlsdnpHOW1qQQo1WWlqSEpHSE5qbFdGcXlybjFDZllTNmtvYTRUR0VQbmdCb0F6aVdSYkRHZGhFZ0pBQkhycG9hRllhTDYxenF5Ck1SNmpDMEsycHM5cXlaQU43NExFQmVkRWZLN3RCT3pXTXdyNThBPT0KLS0tLS1FTkQgWDUwOSBDUkwtLS0tLQo=")
    "mexico.ovpn"      = base64decode("Y2xpZW50CmRldiB0dW4KcHJvdG8gdWRwCnJlbW90ZSBtZXhpY28ucHJpdmFjeS5uZXR3b3JrIDExOTgKcmVzb2x2LXJldHJ5IGluZmluaXRlCm5vYmluZApwZXJzaXN0LWtleQpjaXBoZXIgYWVzLTEyOC1jYmMKYXV0aCBzaGExCnRscy1jbGllbnQKcmVtb3RlLWNlcnQtdGxzIHNlcnZlcgoKYXV0aC11c2VyLXBhc3MgY3JlZGVudGlhbHMuY29uZiAKY29tcHJlc3MKdmVyYiAxCjxjcmwtdmVyaWZ5PgotLS0tLUJFR0lOIFg1MDkgQ1JMLS0tLS0KTUlJQ1dEQ0NBVUF3RFFZSktvWklodmNOQVFFTkJRQXdnZWd4Q3pBSkJnTlZCQVlUQWxWVE1Rc3dDUVlEVlFRSQpFd0pEUVRFVE1CRUdBMVVFQnhNS1RHOXpRVzVuWld4bGN6RWdNQjRHQTFVRUNoTVhVSEpwZG1GMFpTQkpiblJsCmNtNWxkQ0JCWTJObGMzTXhJREFlQmdOVkJBc1RGMUJ5YVhaaGRHVWdTVzUwWlhKdVpYUWdRV05qWlhOek1TQXcKSGdZRFZRUURFeGRRY21sMllYUmxJRWx1ZEdWeWJtVjBJRUZqWTJWemN6RWdNQjRHQTFVRUtSTVhVSEpwZG1GMApaU0JKYm5SbGNtNWxkQ0JCWTJObGMzTXhMekF0QmdrcWhraUc5dzBCQ1FFV0lITmxZM1Z5WlVCd2NtbDJZWFJsCmFXNTBaWEp1WlhSaFkyTmxjM011WTI5dEZ3MHhOakEzTURneE9UQXdORFphRncwek5qQTNNRE14T1RBd05EWmEKTUNZd0VRSUJBUmNNTVRZd056QTRNVGt3TURRMk1CRUNBUVlYRERFMk1EY3dPREU1TURBME5qQU5CZ2txaGtpRwo5dzBCQVEwRkFBT0NBUUVBUVpvOVg5N2NpOEVjUFl1L3VLMkhCMTUyT1piZVpDSU5tWXlsdUxET2RjU3ZnNkI1CmpJK2ZmS04zbGFEdmN6c0c2Q3htWTNqTnljNzlYVnBFWVVucTRyVDNGZnZlVzErUmFsZitWZjM4SGRwd0I4RVcKQjRoWmxRMjA1KzIxQ0FMTHZadlI4SGNQeEM5S0VuZXYxbVU0NndrVGlvdjBFS2MrRWRSeGtqNXlNZ3YwVjJSZQp6ZTdBUCtOUTl5a3ZEU2NINGVZQ3NtdWZOcElqQkxocExFMmN1WlpYQkxjUGh1UnpWb1UzbDdBOWx2ekc5bWpBCjVZaWpISkdITmpsV0ZxeXJuMUNmWVM2a29hNFRHRVBuZ0JvQXppV1JiREdkaEVnSkFCSHJwb2FGWWFMNjF6cXkKTVI2akMwSzJwczlxeVpBTjc0TEVCZWRFZks3dEJPeldNd3I1OEE9PQotLS0tLUVORCBYNTA5IENSTC0tLS0tCjwvY3JsLXZlcmlmeT4KCjxjYT4KLS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUZxekNDQkpPZ0F3SUJBZ0lKQUtaN0Q1WXY4N3FETUEwR0NTcUdTSWIzRFFFQkRRVUFNSUhvTVFzd0NRWUQKVlFRR0V3SlZVekVMTUFrR0ExVUVDQk1DUTBFeEV6QVJCZ05WQkFjVENreHZjMEZ1WjJWc1pYTXhJREFlQmdOVgpCQW9URjFCeWFYWmhkR1VnU1c1MFpYSnVaWFFnUVdOalpYTnpNU0F3SGdZRFZRUUxFeGRRY21sMllYUmxJRWx1CmRHVnlibVYwSUVGalkyVnpjekVnTUI0R0ExVUVBeE1YVUhKcGRtRjBaU0JKYm5SbGNtNWxkQ0JCWTJObGMzTXgKSURBZUJnTlZCQ2tURjFCeWFYWmhkR1VnU1c1MFpYSnVaWFFnUVdOalpYTnpNUzh3TFFZSktvWklodmNOQVFrQgpGaUJ6WldOMWNtVkFjSEpwZG1GMFpXbHVkR1Z5Ym1WMFlXTmpaWE56TG1OdmJUQWVGdzB4TkRBME1UY3hOek0xCk1UaGFGdzB6TkRBME1USXhOek0xTVRoYU1JSG9NUXN3Q1FZRFZRUUdFd0pWVXpFTE1Ba0dBMVVFQ0JNQ1EwRXgKRXpBUkJnTlZCQWNUQ2t4dmMwRnVaMlZzWlhNeElEQWVCZ05WQkFvVEYxQnlhWFpoZEdVZ1NXNTBaWEp1WlhRZwpRV05qWlhOek1TQXdIZ1lEVlFRTEV4ZFFjbWwyWVhSbElFbHVkR1Z5Ym1WMElFRmpZMlZ6Y3pFZ01CNEdBMVVFCkF4TVhVSEpwZG1GMFpTQkpiblJsY201bGRDQkJZMk5sYzNNeElEQWVCZ05WQkNrVEYxQnlhWFpoZEdVZ1NXNTAKWlhKdVpYUWdRV05qWlhOek1TOHdMUVlKS29aSWh2Y05BUWtCRmlCelpXTjFjbVZBY0hKcGRtRjBaV2x1ZEdWeQpibVYwWVdOalpYTnpMbU52YlRDQ0FTSXdEUVlKS29aSWh2Y05BUUVCQlFBRGdnRVBBRENDQVFvQ2dnRUJBUFhECkwxTDl0WDZER2YzNmxpQTdVQlR5NUk4Njl6MFVWbzNsSW1mT3MvR1NpRktQdElubGVzUDY1NTc3bmQ3VU56elgKbEgvUC9DbkZQZEJXbExwNXplM0hSQkNjL0F2Z3I1Q2RNUmtFc3lTTDVHSEJac3g2dzJjYXlRMkVjUmhWVHdXcApjZGxkZU5PK3BQcjlySWdQcnRYcVQ0U1dWaVRRUkJlR004Q0R4QXlUb3BUc29ialNpWVpDRjlUYTFndW5sMEcvCjhWZnArU1hmWUNDK1p6V3ZQK0wxcEZoUFJxelFROGsrd01aSW92T2JLMXMrbmx3UGFMeWF5enc5YThzVW52V0IKLzVyR1BkSVluUVdQZ29ObExOOUhwU21zQWN3Mno4RFhJOXBJeGJyNzRjYjMvSFNmdVlHT0xrUnFyT2s2aDRSQwpPZnVXb1RyWnVwMXVFT24rZnc4Q0F3RUFBYU9DQVZRd2dnRlFNQjBHQTFVZERnUVdCQlF2NjNuUS9wSkF0NXRMCnk4VkpjYkhlMjJaT3NqQ0NBUjhHQTFVZEl3U0NBUll3Z2dFU2dCUXY2M25RL3BKQXQ1dEx5OFZKY2JIZTIyWk8Kc3FHQjdxU0I2ekNCNkRFTE1Ba0dBMVVFQmhNQ1ZWTXhDekFKQmdOVkJBZ1RBa05CTVJNd0VRWURWUVFIRXdwTQpiM05CYm1kbGJHVnpNU0F3SGdZRFZRUUtFeGRRY21sMllYUmxJRWx1ZEdWeWJtVjBJRUZqWTJWemN6RWdNQjRHCkExVUVDeE1YVUhKcGRtRjBaU0JKYm5SbGNtNWxkQ0JCWTJObGMzTXhJREFlQmdOVkJBTVRGMUJ5YVhaaGRHVWcKU1c1MFpYSnVaWFFnUVdOalpYTnpNU0F3SGdZRFZRUXBFeGRRY21sMllYUmxJRWx1ZEdWeWJtVjBJRUZqWTJWegpjekV2TUMwR0NTcUdTSWIzRFFFSkFSWWdjMlZqZFhKbFFIQnlhWFpoZEdWcGJuUmxjbTVsZEdGalkyVnpjeTVqCmIyMkNDUUNtZXcrV0wvTzZnekFNQmdOVkhSTUVCVEFEQVFIL01BMEdDU3FHU0liM0RRRUJEUVVBQTRJQkFRQW4KYTVQZ3J0eGZ3VHVtRDQrMy9TWXZ3b0Q2NmNCOEljSy8vaDFtQ3pBZHVVOEtnVVhvY0x4N1FnSldvOWxuWjh4VQpyeVh2V2FiMnVzZzRmcWs3RlBpMDBiRUQ0ZjRxVlFGVmZHZlBaSUg5UVE3LzQ4YlBNOVJ5ZnpJbVpXVUNlbkszCjdwZHc0QnZnb3lzMnJITEhiR2VuN2YyOGtuVDJqL2NiTXhkNzh0UWMyMFRJT2JHam84K0lTVFJjbFNUUkJ0eUMKR29oc2VLWXBUUzloaW1GRVJwVWdOdGVmdllIYm43MG1JT3pmT0pGVFZxZnJwdGY5alhhOU44TXB5M2F5Zm9kegoxd2lxZHRlcUZYa1RZb1NEY3RnS01pWjZHZG9jSzluTXJvUWlwSVF0cG53ZDR5QkRXSXlDNkJ2bGtycTVUUVV0CllEUTh6OXYrRE1PNml3eUlEUmlVCi0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0KPC9jYT4KCmRpc2FibGUtb2NjCg==")
  }
}
